!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RM=t():e.RM=t()}(self,(function(){return function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{install:function(){return $},version:function(){return Z}});var n=0,r={token:"empty token",errorCount:0,tjsToken:"8de4c78a3ec64020ab2ad15dea1ae9ff",tjsApp:"rmagent",tjsVersion:"3.6.0",getErrorUrl:function(){return"https://capture.trackjs.com/capture?token="+r.tjsToken+"&v="+r.tjsVersion+"&source=rm"},error:function(e,t){if(void 0===t&&(t=null),!(n>=2)){var i=e||{},o=i.message||"empty",s=i.stack||(new Error).stack;r.errorCount++;var a=(self.location||"").toString(),c={agentPlatform:"browser",console:[{message:JSON.stringify(e),severity:"log",timestamp:(new Date).toISOString()}],customer:{token:r.tjsToken,application:r.tjsApp,userId:r.token,version:"1.8.0"},entry:"catch",environment:{originalUrl:a,userAgent:navigator.userAgent},message:o,url:a,stack:s,timestamp:(new Date).toISOString(),version:r.tjsVersion};null!=t&&c.console.push({message:t,severity:"log",timestamp:(new Date).toISOString()});var u=new XMLHttpRequest;u.open("POST",r.getErrorUrl()),u.send(JSON.stringify(c)),n++}}};function i(){return"undefined"==typeof document}function o(e){return(e=e||"").indexOf("?")>=0&&(e=e.split("?")[0]),e.length>=1e3&&(e=e.substr(0,1e3)),e}function s(e,t){return void 0===t&&(t=0),parseFloat(e.toFixed(t))}var a=["com","net","gov","edu","org"];function c(e,t,n){var r=e[t]||u;e[t]=n(r)}function u(){}function l(){return Math.floor(1e3*(Date.now()+Math.random()))}function p(e,t){try{for(var n=t.split("."),r=e,i=0;i<n.length;i++){if(!r[n[i]])return!1;r=r[n[i]]}return!0}catch(e){return!1}}var f,h,g,d,m=new(function(){function t(){var e=this;this.apiEntries=[],this.addEntry=function(t){t.url&&0===t.url.indexOf("http")&&(e.options.monitorSelfCalls||0!==t.url.indexOf(e.options.ingestUrl))&&e.apiEntries.push(t)}}return t.prototype.install=function(e){this.options=e,this.wrapFetch(),this.wrapXhr()},t.prototype.getApis=function(e){if(void 0===e&&(e=!1),e||this.apiEntries.length>=10){var t=this.apiEntries;return this.apiEntries=[],t}return[]},t.prototype.wrapFetch=function(){var t=this;c(e.g,"fetch",(function(n){return function(r,a){r instanceof Request&&r.url;var c=r instanceof Request?r.method:(a||{}).method||"GET",u=n.apply(e.g,arguments);return u.__rm_state__={source:i()?"worker":"fetch",startedOn:s(performance.now()),method:c,pageUrl:o(self.location.toString())},u.then((function(e){var n=u.__rm_state__;if(n){var r=performance.now(),i=Object.assign(n,{duration:s(r)-n.startedOn,statusCode:e.status,contentLength:e.headers.get("content-length"),contentType:e.headers.get("content-type"),url:e.url});t.addEntry(i)}return e}))}}))},t.prototype.wrapXhr=function(){if(!i()){var e=this;c(XMLHttpRequest.prototype,"open",(function(e){return function(t,n){var r=this;return r.__rm_state__={source:"xhr",method:t},e.apply(r,arguments)}})),c(XMLHttpRequest.prototype,"send",(function(t){return function(){var n=this,r=n.__rm_state__;return r?(n.__rm_state__=Object.assign(r,{startedOn:s(performance.now()),pageUrl:o(self.location.toString())}),n.addEventListener("readystatechange",(function(){if(4===n.readyState){var t=n.__rm_state__,r=performance.now(),i=Object.assign(t,{duration:s(r)-t.startedOn,statusCode:n.status,url:n.responseURL,contentLength:n.getResponseHeader("content-length"),contentType:n.getResponseHeader("content-type")});e.addEntry(i)}}),!0),t.apply(n,arguments)):t.apply(n,arguments)}}))}},t}()),v="__rm_sid__",y="__rm_sid_ts__",T={_sessionId:0,_storageDisabled:!1,getSessionId:function(){var e=Date.now(),t=0;if(this._storageDisabled&&this._sessionId)return this._sessionId;try{this._sessionId=parseInt(localStorage.getItem(v),10),t=parseInt(localStorage.getItem(y),10)}catch(e){this._storageDisabled=!0}if(!this._sessionId||this.isSessionExpired(e,t)){this._sessionId=l(),S.addEvent({name:"session_start",time:s(performance.now()),pageUrl:self.location.toString(),referrer:i()?"":document.referrer});try{localStorage.setItem(v,this._sessionId.toString()),this.refreshSession()}catch(e){this._storageDisabled=!0}}return this._sessionId},refreshSession:function(){try{localStorage.setItem(y,Date.now().toString())}catch(e){}},isSessionExpired:function(e,t){return!t||t+18e5<e}},S=new(function(){function e(){this.eventEntries=[]}return e.prototype.install=function(e,t){this.options=e,this.wrapHistory(),this.wrapActivity(),this.addEvent({name:i()?"worker_init":"page_view",time:s(performance.now()),pageUrl:self.location.toString()})},e.prototype.getEvents=function(e){if(void 0===e&&(e=!1),e||this.eventEntries.length>=5){var t=this.eventEntries;return this.eventEntries=[],t}return[]},e.prototype.addEvent=function(e){T.refreshSession(),this.eventEntries.push(e)},e.prototype.wrapActivity=function(){var e=this;i()||document.addEventListener("click",(function(){e.addEvent({name:"click",time:s(performance.now()),pageUrl:self.location.toString()})}),!0)},e.prototype.wrapHistory=function(){var e=this;if(this.isCompatible()){var t=this;self.addEventListener("popstate",(function(){e.addEvent({name:"popstate",time:s(performance.now()),pageUrl:self.location.toString()})}),!0),["pushState","replaceState"].forEach((function(e){c(history,e,(function(n){return function(){var r=n.apply(this,arguments);return t.addEvent({name:e,time:s(performance.now()),pageUrl:self.location.toString()}),r}}))}))}},e.prototype.isCompatible=function(){return!i()&&!p(self,"chrome.app.runtime")&&p(self,"addEventListener")&&p(self,"history.pushState")},e}()),w=["safeframe.googlesyndication.com","chrome-extension:","moz-extension:"],R=function(){function e(){this.hasSent=!1}return e.prototype.cacheResources=function(){this.hasSent||(e.cachedResourceTimings=e.getAllResources())},e.prototype.getResources=function(){var e=this;if(this.hasSent)return null;var t=this.getResourcesByOrigin();return Object.keys(t).map((function(n){return e.getResourceEntryByOrigin(n,t[n])}))},e.prototype.getPageResourceTimelines=function(){var t=e.getAllResources(),n=this.binResources(t),r=n.allImages,i=n.allScripts,o=n.allXhr,s=n.allCss,a=n.allFonts,c=n.allOther;return{imgTimeline:this.getTimeRangesForResources(r).join(","),xhrTimeline:this.getTimeRangesForResources(o).join(","),jsTimeline:this.getTimeRangesForResources(i).join(","),cssTimeline:this.getTimeRangesForResources(s).join(","),fontTimeline:this.getTimeRangesForResources(a).join(","),otherTimeline:this.getTimeRangesForResources(c).join(",")}},e.prototype.getResourcesByOrigin=function(){var t=this,n=e.getAllResources(),r={};return n.forEach((function(e){try{var n=t.getOriginFromResource(e);r[n]||(r[n]=[]),r[n].push(e)}catch(e){}})),r.__total=n,r},e.prototype.getOriginFromResource=function(e){var t=new URL(e.name).origin;return t.startsWith("https://www.google.")&&(t="https://www.google.com"),t},e.prototype.getResourceEntryByOrigin=function(e,t){var n=this.binResources(t),r=n.allImages,i=n.allScripts,o=n.allXhr,s=n.allCss,a=n.allFonts,c=n.allOther;return{origin:e,cssCount:s.length,cssTime:this.getWallClockTimeForResources(s),cssTimeline:this.getTimeRangesForResources(s).join(","),fontCount:a.length,fontTime:this.getWallClockTimeForResources(a),fontTimeline:this.getTimeRangesForResources(a).join(","),imgCount:r.length,imgTime:this.getWallClockTimeForResources(r),imgTimeline:this.getTimeRangesForResources(r).join(","),jsCount:i.length,jsTime:this.getWallClockTimeForResources(i),jsTimeline:this.getTimeRangesForResources(i).join(","),xhrCount:o.length,xhrTime:this.getWallClockTimeForResources(o),xhrTimeline:this.getTimeRangesForResources(o).join(","),otherCount:c.length,otherTime:this.getWallClockTimeForResources(c),otherTimeline:this.getTimeRangesForResources(c).join(","),totalCount:t.length,totalTime:this.getWallClockTimeForResources(t),totalTimeline:this.getTimeRangesForResources(t).join(",")}},e.getAllResources=function(){var t=(e.cachedResourceTimings||[]).concat(performance.getEntriesByType("resource")),n={};return t.filter((function(t){if(!t||e.shouldIgnore(t))return!1;var r=t.name+t.startTime;return!n[r]&&(n[r]=!0,!0)}))},e.shouldIgnore=function(e){return w.some((function(t){return e.name.toLowerCase().indexOf(t)>=0}))},e.prototype.binResources=function(e){var t=this,n=[],r=[],i=[],o=[],s=[],a=[];return e.forEach((function(e){t.isImage(e)?n.push(e):t.isScript(e)?r.push(e):t.isXhr(e)?i.push(e):t.isCss(e)?o.push(e):t.isFont(e)?s.push(e):a.push(e)})),{allImages:n,allScripts:r,allXhr:i,allCss:o,allFonts:s,allOther:a}},e.prototype.isImage=function(e){if("img"===e.initiatorType)return!0;try{if("css"===e.initiatorType||"link"===e.initiatorType){var t=new URL(e.name).pathname.toLowerCase();return[".jpg",".jpeg",".png",".gif",".svg",".raw",".webp",".heif",".avif"].some((function(e){return t.endsWith(e)}))}}catch(e){}return!1},e.prototype.isScript=function(e){if("script"===e.initiatorType)return!0;try{if("link"===e.initiatorType||"other"===e.initiatorType){var t=new URL(e.name).pathname.toLowerCase();return[".js",".json"].some((function(e){return t.endsWith(e)}))}}catch(e){}return!1},e.prototype.isXhr=function(e){return"fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType},e.prototype.isCss=function(e){if("link"!==e.initiatorType&&"css"!==e.initiatorType)return!1;try{return new URL(e.name).pathname.toLowerCase().endsWith("css")}catch(e){}return!1},e.prototype.isFont=function(e){if("link"!==e.initiatorType&&"css"!==e.initiatorType&&"other"!==e.initiatorType)return!1;try{var t=new URL(e.name).pathname.toLowerCase();return[".woff",".woff2",".ttf",".eot",".otf"].some((function(e){return t.endsWith(e)}))}catch(e){}return!1},e.prototype.getWallClockTimeForResources=function(e){return s(this.getTimeRangesForResources(e).reduce((function(e,t){return e+t.duration}),0))},e.prototype.getTimeRangesForResources=function(e){e=e.sort((function(e,t){return e.startTime-t.startTime}));var t=[];return e.forEach((function(e){var n=t[t.length-1];n&&n.isWithinRange(e)?n.applyTiming(e):t.push(new E(e))})),t},e.prototype.sentResources=function(){this.hasSent=!0,e.cachedResourceTimings=null},e.cachedResourceTimings=null,e}(),E=function(){function e(e){this.start=e.startTime,this.end=e.responseEnd}return Object.defineProperty(e.prototype,"duration",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),e.prototype.isWithinRange=function(e){return e.startTime<=this.end},e.prototype.applyTiming=function(e){this.end<e.responseEnd&&(this.end=e.responseEnd)},e.prototype.toString=function(){return"".concat(s(this.start),"-").concat(s(this.end))},e}(),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_=function(){function e(){this.hasSentPage=!1}return e.prototype.getPageUrl=function(){return this.pageUrl||o(self.location.toString())},e.prototype.getPageEntry=function(){if(i())return null;if(this.hasSentPage)return null;var e=performance.getEntriesByType("navigation")[0],t=null;if(e)t={url:o(0===e.name.indexOf("http")?e.name:self.location.toString()),tempFullUrl:0===e.name.indexOf("http")?e.name:self.location.toString(),referrer:i()?"":document.referrer,start:s(e.startTime),duration:s(e.duration),domInteractive:s(e.domInteractive),dnsTime:s(e.domainLookupEnd-e.domainLookupStart),sslTime:s(e.connectEnd-e.connectStart),serverTime:s(e.responseEnd-e.requestStart),blockingAssetLoadTime:s(e.domInteractive-e.responseEnd),firstByteTime:s(e.responseStart),pageSize:e.transferSize};else{var n=performance.timing;t={url:o(self.location.toString()),tempFullUrl:self.location.toString(),referrer:i()?"":document.referrer,start:0,duration:s(n.domComplete-n.navigationStart),domInteractive:s(n.domInteractive-n.navigationStart),dnsTime:s(n.domainLookupEnd-n.domainLookupStart),sslTime:s(n.connectEnd-n.connectStart),serverTime:s(n.responseEnd-n.requestStart),blockingAssetLoadTime:s(n.domInteractive-n.responseEnd),firstByteTime:s(n.responseStart-n.navigationStart)}}this.pageUrl=t.url;var r=(new R).getPageResourceTimelines();return b(b({},t),r)},e.prototype.sentPage=function(){this.hasSentPage=!0},e}(),k=-1,O=function(e){addEventListener("pageshow",(function(t){t.persisted&&(k=t.timeStamp,e(t))}),!0)},C=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},L=function(){var e=C();return e&&e.activationStart||0},I=function(e,t){var n=C(),r="navigate";return k>=0?r="back-forward-cache":n&&(r=document.prerendering||L()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},j=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},F=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},A=function(e,t,n,r){var i,o;return function(s){t.value>=0&&(s||r)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},P=-1,U=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},x=function(){F((function(e){var t=e.timeStamp;P=t}),!0)},B=function(){return P<0&&(P=U(),x(),O((function(){setTimeout((function(){P=U(),x()}),0)}))),{get firstHiddenTime(){return P}}},D=function(e,t){t=t||{};var n,r=[1800,3e3],i=B(),o=I("FCP"),s=function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(c&&c.disconnect(),e.startTime<i.firstHiddenTime&&(o.value=Math.max(e.startTime-L(),0),o.entries.push(e),n(!0)))}))},a=window.performance&&window.performance.getEntriesByName&&window.performance.getEntriesByName("first-contentful-paint")[0],c=a?null:j("paint",s);(a||c)&&(n=A(e,o,r,t.reportAllChanges),a&&s([a]),O((function(i){o=I("FCP"),n=A(e,o,r,t.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,n(!0)}))}))})))},H=!1,q=-1,M={passive:!0,capture:!0},W=new Date,V=function(e,t){f||(f=t,h=e,g=new Date,N(removeEventListener),X())},X=function(){if(h>=0&&h<g-W){var e={entryType:"first-input",name:f.type,target:f.target,cancelable:f.cancelable,startTime:f.timeStamp,processingStart:f.timeStamp+h};d.forEach((function(t){t(e)})),d=[]}},Q=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){V(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,M),removeEventListener("pointercancel",r,M)};addEventListener("pointerup",n,M),addEventListener("pointercancel",r,M)}(t,e):V(t,e)}},N=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Q,M)}))},z={},J=function(){function e(){var e=this;this.vitalsSent=!1,this.metricQueue=new Set,this.addToQueue=function(t){e.metricQueue.add(t)},i()||(function(e,t){t=t||{};var n=[.1,.25];H||(D((function(e){q=e.value})),H=!0);var r,i=function(t){q>-1&&e(t)},o=I("CLS",0),s=0,a=[],c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=a[0],n=a[a.length-1];s&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(s+=e.value,a.push(e)):(s=e.value,a=[e]),s>o.value&&(o.value=s,o.entries=a,r())}}))},u=j("layout-shift",c);u&&(r=A(i,o,n,t.reportAllChanges),F((function(){c(u.takeRecords()),r(!0)})),O((function(){s=0,q=-1,o=I("CLS",0),r=A(i,o,n,t.reportAllChanges)})))}(this.addToQueue,{reportAllChanges:!0}),function(e,t){t=t||{};var n,r=[100,300],i=B(),o=I("FID"),s=function(e){e.startTime<i.firstHiddenTime&&(o.value=e.processingStart-e.startTime,o.entries.push(e),n(!0))},a=function(e){e.forEach(s)},c=j("first-input",a);n=A(e,o,r,t.reportAllChanges),c&&F((function(){a(c.takeRecords()),c.disconnect()}),!0),c&&O((function(){var i;o=I("FID"),n=A(e,o,r,t.reportAllChanges),d=[],h=-1,f=null,N(addEventListener),i=s,d.push(i),X()}))}(this.addToQueue,{reportAllChanges:!0}),D(this.addToQueue,{reportAllChanges:!0}),function(e,t){t=t||{};var n,r=[2500,4e3],i=B(),o=I("LCP"),s=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-L(),0);r<i.firstHiddenTime&&(o.value=r,o.entries=[t],n())}},a=j("largest-contentful-paint",s);if(a){n=A(e,o,r,t.reportAllChanges);var c=function(){z[o.id]||(s(a.takeRecords()),a.disconnect(),z[o.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),F(c,!0),O((function(i){o=I("LCP"),n=A(e,o,r,t.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,z[o.id]=!0,n(!0)}))}))}))}}(this.addToQueue,{reportAllChanges:!0}))}return e.prototype.getVitals=function(e){if(this.vitalsSent)return null;if(0===this.metricQueue.size)return null;var t={url:e};return this.metricQueue.forEach((function(e){"FCP"===e.name&&(t.fcp=s(e.value)),"LCP"===e.name&&(t.lcp=s(e.value)),"CLS"===e.name&&(t.cls=s(e.value,5)),"FID"===e.name&&(t.fid=s(e.value,1))})),t.lcp&&!t.cls&&(t.cls=0),t},e.prototype.sentVitals=function(){this.vitalsSent=!0},e}(),G=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Y=function(){function e(t){var n=this;if(this.timeOrigin=null,this.entryHash={},this.endpoints=[],this.pageService=new _,this.resourceService=new R,this.shutdownSend=!1,this.sendCount=0,this.pageViewId=l(),this.getIngestUrl=function(){return"".concat(n.options.ingestUrl,"?token=").concat(n.options.token,"&v=").concat("1.8.0")},this.sendBeacon=function(){try{var e=n.getPayload(!0);if(e.source="beacon",navigator.sendBeacon&&n.payloadHasData(e)){n.clearPayloadAfterSend(e);var t=n.getIngestUrl(),i=JSON.stringify(e);try{navigator.sendBeacon(t,i)}catch(e){}}}catch(e){r.error(e)}},self.performance&&self.performance.getEntriesByType&&self.URL&&self.URL.prototype&&"hostname"in self.URL.prototype){var o,s=performance.getEntriesByType("navigation")||[];(i()||s.length||performance.timing)&&(this.options=Object.keys(e.defaults).reduce((function(n,r){return n[r]=t[r]||e.defaults[r],n}),{}),this.timeOrigin=performance.timeOrigin||(performance.timing||{}).navigationStart||(new Date).getTime(),T.getSessionId(),m.install(this.options),S.install(this.options,this.timeOrigin),this.manageResourceBuffer(),o=function(){try{n.webVitalsObserver=new J,T.refreshSession(),setTimeout((function(){return n.checkAndSend()}),1e4),setInterval((function(){return n.checkAndSend()}),6e4),self.addEventListener("pagehide",(function(){return n.sendBeacon()})),self.addEventListener("visibilitychange",(function(){i()||"hidden"!==document.visibilityState||n.sendBeacon()}))}catch(e){r.error(e)}},i()||"complete"===document.readyState?o():document.addEventListener("readystatechange",(function(e){"complete"===document.readyState&&o()})))}}return e.prototype.getEndpointEntries=function(){var e=this,t=[];return R.getAllResources().forEach((function(n){if(!(Object.keys(e.entryHash).length>=50||n.duration<=0||"xmlhttprequest"!==n.initiatorType&&"fetch"!==n.initiatorType)){var i=o(n.name);if(function(e,t){var n=function(e){try{if(!e||0!==e.indexOf("http"))return null;var t=new URL(e).hostname;if(!t)return null;var n=t.split("."),i=n.pop();if("localhost"===i)return i;if("127.0.0.1"===t)return t;var o=n.pop();return 2===o.length&&(o=n.pop()),a.indexOf(o)>=0&&(o=n.pop()),"".concat(o,".")}catch(t){return r.error(t,"Page Url: ".concat(e)),null}}(t);if(!n)return!1;try{var i=new URL(e).hostname;return!!i&&i.indexOf(n)>=0}catch(t){return r.error(t,"Problem parsing first party url: ".concat(e)),!1}}(i,self.location.toString())){var c=i+n.startTime;e.entryHash[c]||(e.options.monitorSelfCalls||0!==e.getIngestUrl().indexOf(i))&&(r.errorCount>0&&0===r.getErrorUrl().indexOf(i)||(e.entryHash[c]=!0,t.push({url:i,start:s(n.startTime),duration:s(n.duration)})))}}})),t},e.prototype.getDevice=function(){try{if(/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return"mobile"}catch(e){}return"desktop"},e.prototype.getNetworkType=function(){try{var e=null===navigator||void 0===navigator?void 0:navigator.connection;return e?"".concat(e.effectiveType,":").concat(e.downlink,":").concat(e.rtt):null}catch(e){return null}},e.prototype.getPayload=function(e){var t;return void 0===e&&(e=!1),this.endpoints=this.endpoints.concat(this.getEndpointEntries()),{token:this.options.token,timeOrigin:new Date(this.timeOrigin).toISOString(),timeSent:(new Date).toISOString(),device:this.getDevice(),pageViewId:this.pageViewId,sessionId:T.getSessionId(),page:this.pageService.getPageEntry(),endpoints:G([],this.endpoints,!0),vitals:null===(t=this.webVitalsObserver)||void 0===t?void 0:t.getVitals(this.pageService.getPageUrl()),resources:this.resourceService.getResources(),tags:this.options.tags,networkType:this.getNetworkType(),api:m.getApis(e),events:S.getEvents(e)}},e.prototype.payloadHasData=function(e){return!(this.shutdownSend||this.sendCount>=60||!e||!(e.page||e.endpoints.length||e.vitals||e.resources||e.api.length||e.events.length))},e.prototype.shouldSendInterval=function(e){return!!this.payloadHasData(e)&&!!(e.page||e.vitals||e.resources||i()||e.endpoints.length>=10||e.api.length>0||e.events.length>0)},e.prototype.checkAndSend=function(){var e=this;try{var t=this.getPayload();if(t.source="polling",!this.shouldSendInterval(t))return;this.clearPayloadAfterSend(t);var n=new XMLHttpRequest;n.open("POST",this.getIngestUrl()),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",(function(){n.status>=400&&(e.shutdownSend=!0)})),n.send(JSON.stringify(t))}catch(e){r.error(e)}},e.prototype.clearPayloadAfterSend=function(e){var t;this.sendCount++,this.endpoints.length=0,e.page&&this.pageService.sentPage(),e.vitals&&(null===(t=this.webVitalsObserver)||void 0===t||t.sentVitals()),e.resources&&this.resourceService.sentResources()},e.prototype.manageResourceBuffer=function(){var e=this;performance.setResourceTimingBufferSize&&performance.setResourceTimingBufferSize(1e3);var t=function(t){e.resourceService.cacheResources(),performance.clearResourceTimings()};if(performance.addEventListener)try{performance.addEventListener("resourcetimingbufferfull",t)}catch(e){}else performance.onresourcetimingbufferfull=t},e.defaults={token:null,ingestUrl:"https://in.requestmetrics.com/v1",monitorSelfCalls:!1,tags:[]},e}(),K={__agent:null,version:"1.8.0",install:function(e){try{if(K.__agent)return void console.warn("Request Metrics is already installed.");if(!e||!e.token)return void console.error("You must provide a token to install Request Metrics.");r.token=e.token,K.__agent=new Y(e)}catch(e){r.error(e)}}},Z=K.version,$=K.install;return function(){try{if(i())return;var e=document.querySelector("[data-rm-token]");if(!e)return;var t=e.getAttribute("data-rm-token");if(!t)return;var n=(e.getAttribute("data-rm-tags")||"").split(",").filter((function(e){return e}));r.token=t,K.install({token:t,ingestUrl:e.getAttribute("data-rm-ingest"),monitorSelfCalls:!!e.getAttribute("data-rm-monitor-self"),tags:n})}catch(e){r.error(e)}}(),t}()}));
//# sourceMappingURL=rm.js.map